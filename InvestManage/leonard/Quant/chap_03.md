# 有效市场假说与检验

## 有效市场假说

市场有效假说市场有效假说说的是，在法律健全、功能良好、透明度高、竞争充分的股票市场，一切有价值的信息已经及时、准确、充分地反映在股价走势当中，其中包括企业当前和未来的价值。也就是说，除非存在市场操纵或市场摩擦，否则投资者不可能通过分析以使价格获得高于市场平均水平的超额利润。

> 在任何时候市场价格都反映了已经发生的和尚未发生、但市场预期会发生的事情

有效市场假说的三个等级

1.  弱有效市场假说: 
    -  市场价格已充分反映出所有过去历史的证券价格信息，包括股票的成交价、成交量，卖空金额、融资金额等；
    -  如果弱式有效市场假说成立，则股票价格的技术分析失去作用，基本分析还可能帮助投资者获得超额利润。

2.  半强(semi-strong)有效市场假说:
    -  价格已充分反映出所有已公开的有关公司营运前景的信息，包括股票历史价量、公司盈利资料、盈利预测、公司管理状况及其它公开披露的财务信息等。假如投资者能迅速获得这些信息，股价应迅速作出反应。
    -  如果半强式有效假说成立，在市场中利用基本面分析则失去作用，内幕消息可能获得超额利润。

3.  强有效市场假说
    -  价格已充分地反映了所有关于公司营运的信息，这些信息包括已公开的或内部未公开的信息。
    -  在强式有效市场中，没有任何方法能帮助投资者获得超额利润，即使基金和有内幕消息者也一样。

## 如何理解有效市场假说

1.  市场的基准状态
    -  大部分时间里, 市场是接近有效的或弱有效的, 此时股票价格走势接近随机游走
    -  基准情况下, 投资者无法通过过往信息预测未来价格

2.  资本市场效率
    -  有效市场下, 任何专业投资者的边际市场价值接近于零, 只能通过投资组合获取市场平均收益
    -  在**资本市场效率理论**下, 投资者最好的做法是买入**市场组合**
    -  市场有效假说推动了指数基金的发展

3.  市场有效性的打破
    -  有限理性: 市场参与者足够理性
    -  有限信息: 市场上的信息传递迅速且透明
    -  有限能力: 投资者能根据信息迅速合理地反应
    -  完全竞争: 市场完备且满足完全竞争的条件

市场有效性的条件往往不会被满足, 市场常常处在失效的状态. 进行量化策略研究的时候, 要思考一下有效性是怎么被打破的

## 股票价格模型

几何Brownian motion
在有效市场假说下, 股票价格遵从随机游走, 在连续时间金融中, 常使用几何 Brownian motion 描述其价格

$$
\td S(t) = \mu S \td t + \sigma S \td W_t
$$

其中 $\td W_t$ 被称为Wiener process. 等号右边的系数 $S$ 保证了价格 $S$ 不会出现负值.

按照Ito lemma

$$
\td f(t, W_t) = (\partial_1 f+\frac 1 2 \partial_2^2 f) \td t + \partial_2 f \td W_t
$$


股票价格($\mu, \sigma$ 不含时)也可以表示为

$$
S(t) = \exp\Big((\mu - \frac 1 2 \sigma^2) t + \sigma W_t \Big)
$$

实用中也会将时间离散化研究离散过程.

## 股票价格时间序列模型

实际股票价格不完全表现为几何布朗运动, 股票价格增量本身可能并不是独立同分布的正态增量，也许会存在一定的相关性，又或者呈现肥尾分布以及一定的季节性分布特点。因而，对于股票价格走趋的研究可以应用各种不同的时间序列模型对股票价格进行分析和拟合。

1.  自回归模型(AR)

    股票价格 $r(t) = \Delta \log S(t)$ 存在比较强的一阶自回归相关性(AR(1)), 即

    $$
    r(t)  = \alpha + \beta r(t-1) + \epsilon
    $$

    可以推广到 AR(p)

2.  移动平均模型(MA)

    如果股票价格增量存在弱的短期相关性 (MA(1)):

    $$
    r(t) = c_0 + \beta_0 \epsilon(t) + \beta_1 \epsilon(t-1)
    $$

3.  ARIMA 模型: 如果价格趋势中存在明显单位根
4.  Garch 模型 (Garch(1,1)):

    $$
    \begin{aligned}
    \epsilon(t) &= \sqrt{h_t}v_t \\
    h(t) &= c_0 + \alpha_1 h(t-1) + \beta_1 \epsilon(t)^2
    \end{aligned}
    $$

## 股票基本统计指标

考虑股票价格作为时间的函数 $p(t)$

1.  累计收益率: $R(T) = \log p(T) - \log p(1)$
2.  年化收益率: $r(T) = \log (p(T) / p(1)) / (242*T)$
    其中 242 是一年中的交易日数目

3.  年化波动率: $\sigma = \sigma^*\sqrt{242}$
    其中 $\sigma^*$ 是日度收益率标准差

4.  信息比率: $(r(t) - B(t)) / \sigma$
5.  Sharpe比率: $(r(t) - r_f)/\sigma$
6.  最大回撤: 是一段时间中最高点下跌的最大幅度, 是这段时间可能出现的最大下跌. 
7.  移动平均线: 前一段时间价格的简单平均
    可以通过一定的衰减比率降低历史价格的贡献. 